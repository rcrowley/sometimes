#!/usr/bin/env php
<?php

#
# Sometimes
# Richard Crowley <r@rcrowley.org>
#
# Function generator for XHTML 1.1
#

$tags = array(
	'body',
	'head',
	/*'html',*/ # Special cased below
	'title',
	'abbr',
	'acronym',
	'address',
	'blockquote',
	'br',
	'cite',
	'code',
	'dfn',
	'div',
	'em',
	'h1',
	'h2',
	'h3',
	'h4',
	'h5',
	'h6',
	'kbd',
	'p',
	'pre',
	'q',
	'samp',
	'span',
	'strong',
	/*'var'*/'var_tag', # Reserved word in PHP
	'a',
	/*'dl'*/'dl_tag', # Library function in PHP
	'dd',
	'dt',
	'ol',
	'ul',
	'li',
	/*'object'*/'object_tag', # Reserved word in PHP
	'param',
	'b',
	'big',
	'hr',
	'i',
	'small',
	'sub',
	'sup',
	'tt',
	'del',
	'ins',
	'bdo',
	'button',
	'fieldset',
	'form',
	'input',
	'label',
	'legend',
	'select',
	'optgroup',
	'option',
	'textarea',
	'caption',
	'col',
	'colgroup',
	'table',
	'tbody',
	'td',
	'tfoot',
	'th',
	'thead',
	'tr',
	'img',
	'area',
	'map',
	'meta',
	'noscript',
	'script',
	'style',
	/*'link'*/'link_tag', # Library function in PHP
	'base'
);

echo "<?php\n";
?># Automatically generated by sometimes/bin/xhtml11

class HTML extends Sometimes {
	public function __construct($args) {
		parent::__construct('html', $args);
		if (!isset($this->attrs['xmlns'])) {
			$this->attrs['xmlns'] = 'http://www.w3.org/1999/xhtml';
		}
		if (!isset($this->attrs['xml:lang'])) {
			$this->attrs['xml:lang'] = 'en';
		}
	}
	public function out() {
		echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" ',
			'"http://w3.org/TR/xhtml1/DTD/xhtml1.1.dtd">', "\n";
		parent::out(func_get_args());
	}
}
function html() { return new HTML(func_get_args()); }
<?php

EOD;

foreach ($tags as $tag) {
	?>function <?= $tag; ?>(){$a=func_get_args();return new Sometimes('<?=
		$tag; ?>',$a);}
<?php
}
